import{_ as i,c as a,a as e,o as n}from"./app-DyAfxzyW.js";const l={};function t(h,s){return n(),a("div",null,s[0]||(s[0]=[e(`<h1 id="macos-系统下搭建reactnative环境" tabindex="-1"><a class="header-anchor" href="#macos-系统下搭建reactnative环境"><span>MacOs 系统下搭建ReactNative环境</span></a></h1><h2 id="_1-xcode安装" tabindex="-1"><a class="header-anchor" href="#_1-xcode安装"><span>1. Xcode安装</span></a></h2><p>Xcode版本需和MacOS版本匹配，对应关系及下载地址<a href="https://uovol.com/macos-xcode-version" target="_blank" rel="noopener noreferrer">参考</a></p><h2 id="_2-安装watchman" tabindex="-1"><a class="header-anchor" href="#_2-安装watchman"><span>2. 安装watchman</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Homebrew设置国内镜像源</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/bin/zsh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -fsSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">brew</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> watchman</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如遇网络原因可用以下方式安装</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unzip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> watchman-</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-linux.zip</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> watchman-vYYYY.MM.DD.00-linux</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/{bin,lib}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/var/run/watchman</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bin/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/bin</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lib/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/lib</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 755</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/bin/watchman</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2777</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/var/run/watchman</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://zhuanlan.zhihu.com/p/111014448" target="_blank" rel="noopener noreferrer">Homebrew国内镜像源文档参考</a></p><h2 id="_3-cocoapods安装" tabindex="-1"><a class="header-anchor" href="#_3-cocoapods安装"><span>3. CocoaPods安装</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">brew</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cocoapods</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cocoapods</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>如Ruby版本低则需要使用rvm更新版本</p><p>安装rvm步骤如下</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get.rvm.io</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.bash_profile</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rvm使用</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看rvm版本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rvm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 列出ruby可安装的版本信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rvm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> known</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 下载对应版本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rvm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2.7.0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置默认版本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rvm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2.7.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --default</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h2 id="_4-运行" tabindex="-1"><a class="header-anchor" href="#_4-运行"><span>4. 运行</span></a></h2><p>运行时需注意 pods 中 Deployment Target中IOS版本与 Podfile 中保持一致</p><h2 id="_5-ios打包" tabindex="-1"><a class="header-anchor" href="#_5-ios打包"><span>5. IOS打包</span></a></h2><h3 id="_1-生成ipa安装包" tabindex="-1"><a class="header-anchor" href="#_1-生成ipa安装包"><span>1. 生成ipa安装包</span></a></h3><ol><li><p>首先在 Xcode 中，将编译的目标机器设置成 “iOS Device”，然后点击”Product”–&gt;“Archive”。</p></li><li><p>Archive 成功之后，就可以在 Xcode 的 Organizer 中看到相应的文件。接下来点击 Archive Information 中的 “Distribute App”</p></li><li><p>在弹出界面中需要选择证书类型，选择方式如下：AdHoc(测试证书)选项</p></li><li><p>选择完成后点 Next，Xcode 会自动将测试设备的签名信息附加上，并将相应的 IPA 文件导出</p></li></ol><blockquote><p>打包配置过程<a href="https://blog.csdn.net/lizujun123/article/details/103937668" target="_blank" rel="noopener noreferrer">参考</a><br> 生成ipa文件<a href="https://www.pgyer.com/doc/view/build_ipa" target="_blank" rel="noopener noreferrer">参考</a></p></blockquote><h3 id="_2-签名-如未签名可能引起闪退" tabindex="-1"><a class="header-anchor" href="#_2-签名-如未签名可能引起闪退"><span>2. 签名(如未签名可能引起闪退)</span></a></h3><ol><li><p>在苹果开发者官网下载对应的 ***.Provisioning 文件</p></li><li><p>在Mac的钥匙串应用中选择我的证书导出对应的<strong>p12证书文件</strong>，并记住输入的密码</p></li><li><p>下载 <strong><a href="https://www.i4.cn/" target="_blank" rel="noopener noreferrer">爱思助手</a></strong></p></li><li><p>在依次点击<strong>工具箱</strong> -&gt; <strong>IPA签名</strong> 按照要求上传对应文件即可</p></li></ol><h3 id="_3-安装测试" tabindex="-1"><a class="header-anchor" href="#_3-安装测试"><span>3. 安装测试</span></a></h3><h4 id="使用xcode安装" tabindex="-1"><a class="header-anchor" href="#使用xcode安装"><span>使用Xcode安装</span></a></h4><ol><li><p>打开<strong>XCode</strong>依次点击 Window -&gt; Devices and Simulators。</p></li><li><p>选择Devices &gt; 点击下方 <strong>+</strong> ，选择IPA文件即可</p></li></ol><blockquote><p><strong>其他方式</strong></p><ol><li><a href="http://sign.fengchetech.cn/" target="_blank" rel="noopener noreferrer">风车签名管理</a></li><li>使用爱思助手安装</li></ol></blockquote><h2 id="_6-ios应用发布" tabindex="-1"><a class="header-anchor" href="#_6-ios应用发布"><span>6. IOS应用发布</span></a></h2><h3 id="appstore-testflight-发布" tabindex="-1"><a class="header-anchor" href="#appstore-testflight-发布"><span>AppStore（testflight）发布</span></a></h3><h4 id="上传工具" tabindex="-1"><a class="header-anchor" href="#上传工具"><span>上传工具</span></a></h4><p><a href="https://help.apple.com/app-store-connect/#/devb1c185036" target="_blank" rel="noopener noreferrer">上传工具相关文档</a><a href="https://help.apple.com/itc/apploader/#/apdATD1E53-D1E1A1303-D1E53A1126" target="_blank" rel="noopener noreferrer">altool参数</a></p><h4 id="证书问题" tabindex="-1"><a class="header-anchor" href="#证书问题"><span>证书问题</span></a></h4><p><strong>报错：</strong> <code>ITMS-90034: Missing or invalid signature - The bundle &#39;...&#39; at bundle path &#39;Payload/...&#39; is not signed using an Apple submission certificate.</code></p><p><strong>分析：</strong> 该报错为证书不受信任导致的<br><strong>解决方法：</strong> 重新安装<a href="https://developer.apple.com/cn/support/code-signing/" target="_blank" rel="noopener noreferrer">AppleWWDRCA</a>，下载<a href="https://www.apple.com/certificateauthority/" target="_blank" rel="noopener noreferrer">页面</a>选择<strong>Apple Intermediate Certificates</strong>下的<strong>Worldwide Developer Relations - G3</strong>下载双击安装即可。<br><strong>参考</strong>： <a href="https://cloud.tencent.com/developer/article/1958380" target="_blank" rel="noopener noreferrer">解决iOS 证书不受信任的问题</a></p>`,30)]))}const p=i(l,[["render",t],["__file","mac-rn.html.vue"]]),d=JSON.parse('{"path":"/front-end/mac-rn.html","title":"MacOs 系统下搭建ReactNative环境","lang":"zh-CN","frontmatter":{"date":"2022-07-28T00:00:00.000Z","category":"前端","tag":["ReactNative","APP"]},"headers":[{"level":2,"title":"1. Xcode安装","slug":"_1-xcode安装","link":"#_1-xcode安装","children":[]},{"level":2,"title":"2. 安装watchman","slug":"_2-安装watchman","link":"#_2-安装watchman","children":[]},{"level":2,"title":"3. CocoaPods安装","slug":"_3-cocoapods安装","link":"#_3-cocoapods安装","children":[]},{"level":2,"title":"4. 运行","slug":"_4-运行","link":"#_4-运行","children":[]},{"level":2,"title":"5. IOS打包","slug":"_5-ios打包","link":"#_5-ios打包","children":[{"level":3,"title":"1. 生成ipa安装包","slug":"_1-生成ipa安装包","link":"#_1-生成ipa安装包","children":[]},{"level":3,"title":"2. 签名(如未签名可能引起闪退)","slug":"_2-签名-如未签名可能引起闪退","link":"#_2-签名-如未签名可能引起闪退","children":[]},{"level":3,"title":"3. 安装测试","slug":"_3-安装测试","link":"#_3-安装测试","children":[]}]},{"level":2,"title":"6. IOS应用发布","slug":"_6-ios应用发布","link":"#_6-ios应用发布","children":[{"level":3,"title":"AppStore（testflight）发布","slug":"appstore-testflight-发布","link":"#appstore-testflight-发布","children":[]}]}],"git":{"createdTime":1737710761000,"updatedTime":1737710761000},"readingTime":{"minutes":2.26,"words":679},"filePathRelative":"front-end/mac-rn.md","localizedDate":"2022年7月28日"}');export{p as comp,d as data};
